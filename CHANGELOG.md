# 更新日志

## v0.3.20 (2026-01-23)

- 修复：exe 打包模式下关注评论用户“只滚动不进主页/扫不到人”的问题（`pkg` bytecode 导致 `page.evaluate` 函数序列化异常），构建改用 `pkg --public`。
- 批量：关注评论用户新增可配置参数：等待关注按钮（秒）、并行账号数、并行抖动（秒），提升弱网/风控场景稳定性。
- 优化：关注按钮识别与关注状态确认更稳（已关注/已请求会跳过），失败会自动保存 `data/debug/` 快照便于排查。
- 修复：打开浏览器登录时 Profile 被占用不再直接报错（提示切换到已打开窗口完成登录）；任务运行中禁止再次打开登录避免冲突。
- 修复：mac 上 Windows 虚拟机（共享目录）场景下 Chrome Profile 锁异常；exe 默认将 Profile 存到 `%LOCALAPPDATA%\\X-get2put\\browser-profiles`，并支持 `XGET2PUT_PROFILE_DIR` 覆盖。
- UI：关注评论用户卡片布局对齐。

## v0.3.19 (2026-01-21)

- 构建：修复 macOS 产物构建不稳定问题（改用 `@yao-pkg/pkg`，DMG 失败时不再阻断 ZIP 发布）。

## v0.3.18 (2026-01-21)

- 优化：关注评论用户扫描到目标后立刻进入关注流程（不再“扫到人还继续滑一下”）。
- 修复：关注评论用户增加更强的登录态检测（避免 exe 版 Profile 未登录时出现“无限滚动”的错觉）。
- 优化：关注启动时输出 exe/profile/proxy 的诊断日志，便于对比 npm 版与 exe 版为何行为不同。

## v0.3.17 (2026-01-21)

- 修复：关注评论用户补充“头像区/通用链接”的兜底解析（借鉴 XActions 的选择器思路），降低因页面结构差异导致的“只滚动不进主页”概率。
- 优化：关注评论用户在长时间扫描仍为 0 时会输出更密集的诊断日志，并在超时后自动停止，避免无限滚动。

## v0.3.16 (2026-01-21)

- 批量：点击“关注评论用户-开始”会自动切换到下方「日志」Tab，避免误以为没有输出。
- 批量：日志自动滚动到底（用户手动上滑查看历史时不会被强制拉回底部）。
- 打包：exe 模式下，批量/监控日志也会同步输出到控制台，便于截图反馈排查。

## v0.3.15 (2026-01-21)

- 修复：自动关注评论用户不再强依赖解析 @username；改为优先复用页面上的“用户链接”作为关注目标（兼容 `/i/user/<id>` 路由），解决部分账号/页面结构下“只滚动不进主页”的问题。
- 优化：关注日志中的 user 字段支持显示 `/i/user/...` 等目标，便于排查实际是否进入了主页。

## v0.3.14 (2026-01-21)

- 修复：自动关注评论用户增加对 `article[data-testid="tweet"]` 的优先识别，并补充 status 链接兜底解析（部分页面结构下不再“只滑不进主页”）。
- 优化：当推文链接是 `/i/status/` 等不带作者名时，自动从页面识别主推作者并排除，避免误把作者当评论用户。
- 优化：更激进的滚动与“展开回复”点击（包含 aria-label），并调整诊断日志触发条件，便于定位“为什么一直扫不到人”。

## v0.3.13 (2026-01-21)

- 修复：自动关注评论用户补充更宽松的作者链接兜底（排除正文 tweetText 的 @ 提及链接），提升“只滚动不进主页”的兼容性。
- 优化：扫描到新用户会输出一次新增/样例日志，并在进入主页前输出日志，便于确认是否开始关注流程。
- 优化：首轮扫描无结果时延长尝试轮次，弱网/代理下不易过早判定“无评论”。

## v0.3.12 (2026-01-21)

- 修复：自动关注评论用户解析评论作者更稳（兼容绝对链接；优先从 time/status 链接解析），避免出现 scanned=0 但页面已打开的情况。
- 修复：关注流程强制使用工作页并清理多余空白标签（about:blank/newtab），减少“跟一个空白页/选错 tab”的问题。
- 优化：连续多轮扫描仍为空时输出一次诊断日志（url/articles 等），便于定位登录态/页面结构问题。

## v0.3.11 (2026-01-21)

- 优化：自动关注评论用户在未扫到任何评论用户时会多滚动/尝试展开回复（避免过早判定“无评论”）。
- 优化：只在需要时才打开“动作页”，避免跟一个空白 about:blank 页造成误解；并增加导航兜底避免误操作。

## v0.3.10 (2026-01-21)

- 修复：自动关注评论用户减少空白标签页（复用默认页，避免一次打开 3 个页面）。
- 优化：关注按钮等待与判定更稳；点击后未验证成功不再误计为“已关注”。

## v0.3.9 (2026-01-21)

- 修复：浏览器登录在“Continue with Google”等场景下可能一直卡在“等待登录”，改为检测 Cookie（auth_token/ct0）后自动结束并保存 Profile。

## v0.3.8 (2026-01-21)

- 修复：Release/EXE 打包后 Puppeteer Stealth 子模块缺失导致无法启动浏览器登录（为 pkg 显式打包 `puppeteer-extra-plugin-stealth/evasions`）。

## v0.3.7 (2026-01-21)

- 修复：批量页面“打开浏览器登录”会先自动保存配置，避免“新增账号未保存就登录”导致的“账号未找到”。

## v0.3.6 (2026-01-21)

- 主面板：新增“打开浏览器登录（Profile）”，未配置 OAuth 凭证时可用浏览器方式发帖/转推。
- 批量：关注评论用户改为“边扫描边关注”，不再先收集大量评论用户；评论过少会自动提前结束。
- 构建：新增 GitHub Actions，自动产出 Windows ZIP 与 macOS DMG/ZIP（用于 Releases）。

## v0.3.5 (2026-01-20)

- 批量：关注评论用户新增“每号本次关注上限”，支持只关注前 N 个（按成功关注数计）。

## v0.3.4 (2026-01-20)

- 批量：新增“关注评论用户”功能：输入推文链接，一键让勾选账号去关注该帖下的评论用户（每天每号上限 300），已关注/受保护账号会跳过并输出 warning 日志。

## v0.3.3 (2026-01-20)

- 批量：代理配置改为“每账号独立代理”；移除全局“默认代理/代理池”的混淆配置方式。
- 文档：README 补充“批量起号”板块的完整使用说明与注意事项。

## v0.3.2 (2026-01-20)

- 批量：新增“默认代理”与“代理池”，支持账号从代理池快速选择代理；打开登录浏览器/发帖/API 请求会按账号代理优先生效（未填则用默认代理，再回退到环境变量）。

## v0.3.1 (2026-01-20)

- 修复：点击“手动抓取/测试抓取”等接口不再导致服务直接退出；接口统一返回结构化错误并记录日志，方便排查。
- 批量：登录方式改为“每账号独立浏览器 Profile”登录（不再依赖 Cookie），登录态可用于后续批量发帖流程。
- 批量：新增“报错汇总”Tab，快速定位具体账号的失败原因（账号/时间/错误信息）。
- 批量：图片选择按账号轮换，避免单号长时间重复同一张图；图库目录新增监控，新增图片会自动加入图库并在面板刷新。
